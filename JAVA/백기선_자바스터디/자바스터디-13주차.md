## 목표

자바의 Input과 Ontput에 대해 학습하세요.

## 학습할 것 (필수)

- 스트림 (Stream) / 버퍼 (Buffer) / 채널 (Channel) 기반의 I/O
- InputStream과 OutputStream
- Byte와 Character 스트림
- 표준 스트림 (System.in, System.out, System.err)
- 파일 읽고 쓰기



## 스트림 (Stream) / 버퍼 (Buffer) / 채널 (Channel) 기반의 I/O

### `java.io`와 `java.nio`

>  각 기반의 I/O를 살펴보기에 앞서 자바에서의 I/O는 `java.io`, `java.nio`의 두 패키지로 나눠진다. 나는 이 둘을 큰 틀로 잡고 비교하여 정리하였다.

### `java.io`와 `java.nio`의 차이점

io, nio는 입출력, 버퍼, 비동기, 블로킹/넌블로킹의 방식이 서로 다르다.

| 구분                   | IO                 | NIO                              |
| ---------------------- | ------------------ | -------------------------------- |
| 입출력 방식            | 스트림 방식        | 채널 방식                        |
| 버퍼 방식              | 넌버퍼(non-buffer) | 버퍼(buffer)                     |
| 비동기 방식            | 지원 안 함         | 지원                             |
| 블로킹 / 넌블로킹 방식 | 블로킹 방식만 지원 | 블로킹 / 넌블로킹 방식 모두 지원 |

위 표를 보고 각 방식의 차이점에 대해 알아보자

#### 스트림 vs 채널

* IO는
  * 스트림 기반이다. 스트림은 입력 스트림과 출력 스트림이 따로 구분되어 있으며 예를 들어 파일을 읽고 쓴다면 각자의 스트림(입, 출력)이 필요하다.
* NIO는
  * 채널기반이며 채널은 양방향이다. 파일을 읽고 쓴다면 하나의 채널로 입, 출력이 가능하다.

#### 버퍼 vs 넌버퍼

* IO는 
  * 출력 스트림이 1바이트를 쓰면 입력 스트림이 1바이트를 읽는다.(넌버퍼는 느리다)
  * 보조 스트림(BufferedInputStream, BufferedOutputStream)을 연결하여 사용하기도 한다. 
  * 스트림에서 읽은 데이터를 즉시 처리한다. 그렇기 때문에 스트림에서 입력된 전체 데이터를 별도로 지정하지 않으면 데이터의 위치 이동이 자유롭지 않다.
* NIO는
  * 버퍼를 사용해서 입출력을 한다(IO보다 성능이 좋다). 채널은 버퍼에 저장된 데이터를 출력하고 입력된 데이터를 버퍼에 저장한다.
  * 읽은 데이터를 무조건 버퍼에 저장하기 때문에 버퍼 내에서 데이터의 위치를 이동해가면서 필요한 부분만 읽고 쓸 수 있다.

#### 블로킹 vs 넌블로킹

* IO는
  * 블로킹이 가능하다.
  * read()를 호출하면 입력되기 전까지 Thread가 블로킹 된다. 반대로 write()를 호출해도 마찬가지로 Thread가 블로킹 된다.   빠져 나오는 유일한 방법은 스트림을 닫는 것이다.
* NIO는
  * 블로킹, 넌블로킹 특징을 모두 가진다.
  * NIO 블로킹은 인터럽트를 사용해서 빠져나올 수 있다.
  * NIO 넌블로킹은 데이터가 바로 읽고 쓸 수 있는 상태의 채널만 선택해서 작업 스레드가 처리하기 때문에 블로킹되지 않는다(Selector를 연결한다).



## InputStream과 OutputStream

| InputStream                           | OutputStream                            |
| ------------------------------------- | --------------------------------------- |
| abstract int read( )                  | abstract void write(int b)              |
| int read(byte[ ] b)                   | void write(byte[ ] b)                   |
| int read(byte[ ] b, int off, int len) | void write(byte[ ] b, int off, int len) |

### InputStream

![inputStream](https://t1.daumcdn.net/cfile/tistory/9961443C5C1E016C2B)

> 출처 코딩팩토리  : https://coding-factory.tistory.com/281

InputStream은 **바이트 기반 입력 스트림의 최상위 추상클래스이다.** 읽기에 대한 다양한 추상 메서드가 있으며 목적에 따라 데이터를 입력 받을 수 있다.



### OutputStream

![outputStream](https://t1.daumcdn.net/cfile/tistory/99C0C7335C1E049323)

​	출처 코딩 팩토리 : https://coding-factory.tistory.com/281

OutputStream은 **바이트 기반 출력 스트림의 최상위 추상클래스이다.**