# 목표

자바의 멀티쓰레드 프로그래밍에 대해 학습하세요.



# 학습할 것 (필수)

*   Thread 클래스와 Runnable 인터페이스
*   쓰레드의 상태
*   쓰레드의 우선순위
*   Main 쓰레드
*   동기화
*   데드락



## Thread 클래스와 Runnable 인터페이스

### 프로세스란

*   프로그램은 하나의 프로세스이다.
*   프로그램을 실행하면 운영체제로부터 자원을 할당받아 프로세스가 된다. 
*   프로세스는 프로그램을 실행하는데 필요한 **자원**과 **스레드**로 구성되어 있다.

### 쓰레드란

*   프로세스의 자원을 이용해서 실제 작업을 수행하는 것
*   모든 프로세스에는 하나 이상의 스레드가 존재한다.
*   가장 작은 실행 단위이다.



### Thread 클래스와 Runnable 인터페이스

*   스레드를 생성하는 방법

    1.    `java.lang.Thread`를 상속하여 직접 구현하는 방법

         >   Thread 클래스가 다른 클래스를 확장할 필요가 없을 때

    2.    `Runnable` 인터페이스를 구현하는 방법

         >   위 이유와 반대의 경우

*    `Runnable Example 예제`

    ```java
    package week_10;
    
    public class RunnableExample implements Runnable {
        @Override
        public void run() {
            System.out.println("This is Runnable Example run()");
        }
    }
    ```

    

*    `Thread Example 예제`

    ```java
    package week_10;
    
    public class ThreadExample extends Thread {
        @Override
        public void run() {
            System.out.println("This is Thread Example run()");
        }
    }
    ```



*    `선언 및 실행 예제`

    ```java
    package week_10;
    
    public class ExecuteExample {
        public static void main(String[] args) {
    
            // Runnable을 사용하여 Thread 생성
            RunnableExample runnable = new RunnableExample();
            new Thread(runnable).start();
            
            // Runnable은 다음과 같이 생성이 가능하다 -1
            Thread thread = new Thread(new Runnable() {
             	@Override
                public void run() {
                    System.out.println("This is Runnable Example run()");
                }
            });
    
            // Runnable은 Lambda를 통해서도 생성이 가능하다.
            Thread thread = new Thread( () -> {
               System.out.println("This is Runnable Example run()")
            });
            // Thread를 사용하여 Thread 생성
            ThreadExample thread = new ThreadExample();
            thread.start();
    
        }
    }
    ```

*   실행 결과

>   This is Runnable Example run()
>   This is Thread Example run()
>
>   Process finished with exit code 0



*   ThreadExameple 수정

```java
package week_10;

public class ThreadExample extends Thread {
    public ThreadExample(String valueOf) {
    }

    @Override
    public void run() {
        System.out.println("This is Thread Example run() \t And My Name is \t" + this.getName());
    }
}
```



*   Thread 배열을 선언하고 순서대로 실행되는지 확인하는 예제

```java
package week_10;

public class ThreadOrderExample {
    public static void main(String[] args) {
        Thread[] tArr = new ThreadExample[50];
        
        for (int i = 0; i < 50; i++) {
            Thread t = new ThreadExample(String.valueOf(i + 1));
            tArr[i] = t;
        }

        for (Thread thread : tArr) {
            thread.start();
        }
    }
}
```

*   출력결과

```
This is Thread Example run() 	 And My Name is 	Thread-1
This is Thread Example run() 	 And My Name is 	Thread-6
This is Thread Example run() 	 And My Name is 	Thread-13
This is Thread Example run() 	 And My Name is 	Thread-8
This is Thread Example run() 	 And My Name is 	Thread-21
.
.

This is Thread Example run() 	 And My Name is 	Thread-38
This is Thread Example run() 	 And My Name is 	Thread-44
This is Thread Example run() 	 And My Name is 	Thread-42

```

>   순서대로 실행되지 않는다는 것을 알 수 있다. Thread는 실행할 때 먼저 대기 상태로 진입하며 OS의 스케쥴링에 따라 실행되고, 컴퓨터의 성능에 따라 달리지기 때문이다.



## 쓰레드의 상태

>   스레드 객체를 생서하고 start() 메서드를 호출하면 곧바로 스레드가 실행되는 것처럼 보이지만 실행대기 상태가 된다.

### 실행대기란 ?

*   아직 스케줄링이 되지 않아서 실행을 기다리는 상태이다.
*   실행대기 상태에 있는 스레드 중에서 스케줄링으로 선택된 스레드가 비로소 CPU를 점유하고 run() 메소드를 실행한다. 이때를 실행상태라고 한다.
*   실행 상태 스레드는 메서드를 모두 실행하기 전에 다시 실행 대기 상태로 돌아갈 수 있다. 그리고 실행 대기 상태에 있는 다른 실행 대기 스레드가 선택되어 실행 상태가 된다. 이런식으로 번갈아가면서 자신의 run() 메서드를 실행하고 모든  run()메서드가 종료되면 종료 상태가 되는 것이다.



###  경우에 따라서는 대기 상태로 가지 않을수도 있다.

## 쓰레드의 우선순위



## Main 쓰레드



## 동기화



## 데드락



